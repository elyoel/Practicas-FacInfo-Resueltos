EOI EQU 20H
IMR EQU 21H
INT0 EQU 24h
N_F10 EQU 15

ORG 1000h
  MSJ DB "Vamos a las interupciones", 10
  CANT DB 5
ORG 60;
IP_F10 DW RUT_F10

ORG 3000H
RUT_F10: PUSH BX
  PUSH AX
  MOV BX, offset MSJ
  MOV AL, offset CANT - offset MSJ
  INT 7
  DEC CANT 
  JNZ FIN
  CALL OFF
FIN: MOV AL, EOI
  OUT EOI, AL;
  POP AX
  POP BX
  IRET
  
ORG 3100h
OFF: PUSH AX
  MOV AL, 0FFh
  OUT IMR, AL
  POP AX
  RET
  
ORG 3200h
CONFIG_PIO: CLI
  MOV AL, 0FEH
  OUT IMR, AL;
  MOV AL, N_F10;
  OUT INT0, AL
  MOV AX, IP_F10;
  MOV DX, 0
  STI
  RET
  
ORG 2000H
  CALL CONFIG_PIO
  
LAZO: CMP CANT, 0
  JNZ LAZO
INT 0
END