programa act4
procesos
  proceso agarrarPapel(ES puedo: boolean)
  variables
    IniAv, IniCa: numero
  comenzar
    IniAv:= PosAv
    IniCa:= PosCa
    BloquearEsquina(11, 11)
    Pos(11, 11)
    puedo:= HayPapelEnLaEsquina
    si (puedo)
      tomarPapel
    Pos(IniAv, IniCa)
    LiberarEsquina(11, 11)
  fin    
  proceso verificarMax(ES maxPasos: numero; ES maxId: numero; E pasos: numero; E id: numero)
  comenzar
    si (pasos > maxPasos)
      maxPasos:= pasos
      maxId:= id
  fin
areas
  ciudad: AreaC (1, 1, 100, 100)
robots
  robot Corredor
  variables
    miId, pasos: numero
    hayPapel: boolean
  comenzar
    RecibirMensaje(miId, R5)
    pasos:= 0
    hayPapel:= V
    mientras  hayPapel
      agarrarPapel(hayPapel)
      si (hayPapel)
        depositarPapel
        mover
        pasos:= pasos + 1
    EnviarMensaje(miId, R5)
    EnviarMensaje(pasos, R5)
  fin
  robot Coordinador
  variables
    aux, maxId, maxPasos: numero
  comenzar  
    EnviarMensaje(1, R1)
    EnviarMensaje(2, R2)
    EnviarMensaje(3, R3)
    EnviarMensaje(4, R4)
    repetir 4
      RecibirMensaje(aux, *)
      si (aux = 1)
        RecibirMensaje(aux, R1)
        verificarMax(maxPasos, maxId, aux, 1)
      sino
        si (aux = 2)
          RecibirMensaje(aux, R2)
          verificarMax(maxPasos, maxId, aux, 2)
        sino
          si (aux = 3)
            RecibirMensaje(aux, R3)
            verificarMax(maxPasos, maxId, aux, 3)
          sino
            RecibirMensaje(aux, R4)
            verificarMax(maxPasos, maxId, aux, 4)
    Informar("Robot llego mas lejos R", maxId)
  fin
variables
  R1, R2, R3, R4: Corredor
  R5: Coordinador
comenzar
  AsignarArea(R1, ciudad)
  AsignarArea(R2, ciudad)
  AsignarArea(R3, ciudad)
  AsignarArea(R4, ciudad)
  AsignarArea(R5, ciudad)
  Iniciar(R1, 4, 1)
  Iniciar(R2, 6, 1)
  Iniciar(R3, 8, 1)
  Iniciar(R4, 10, 1)
  Iniciar(R5, 1, 1)
fin