programa act4
procesos
  proceso recogerFlores
  comenzar
    mientras HayFlorEnLaEsquina
      tomarFlor
  fin
  proceso recogerFyP
  comenzar
    recogerFlores
    mientras HayPapelEnLaEsquina
      tomarPapel
  fin
areas
  ciudad: AreaC (1, 1, 100, 100)
robots
  robot RecolectorPapel
  variables
    miId, Ca: numero
  comenzar
    RecibirMensaje(miId, Fiscal)
    repetir 4
      repetir 6
        recogerFlores
        mover
      derecha
    EnviarMensaje(miId, Fiscal)
    RecibirMensaje(Ca, Fiscal)
    Pos(1, Ca)
    derecha
    mientras HayFlorEnLaBolsa & (PosAv < 100)    
      depositarFlor
      mover
  fin
  robot RecolectorFyP
  variables
    miId, Ca: numero
  comenzar
    RecibirMensaje(miId, Fiscal)
    repetir 4
      repetir 10
        recogerFlores
        mover
      derecha
    EnviarMensaje(miId, Fiscal)
    RecibirMensaje(Ca, Fiscal)
    Pos(1, Ca)
    derecha
    mientras HayFlorEnLaBolsa & (PosAv < 100)
      depositarFlor
      mover
    mientras HayPapelEnLaBolsa & (PosAv < 100)
      depositarPapel
      mover
  fin
  robot Fiscalizador
  variables
    primero, segundo: numero
  comenzar  
    EnviarMensaje(1, R1)
    EnviarMensaje(2, R2)
    RecibirMensaje(primero, *)
    RecibirMensaje(segundo, *)
    si(primero = 1)
      EnviarMensaje(20, R1)
      EnviarMensaje(21, R2)
    sino
      EnviarMensaje(21, R1)
      EnviarMensaje(20, R2)
  fin
variables
  R1: RecolectorPapel
  R2: RecolectorFyP
  Fiscal: Fiscalizador
comenzar
  AsignarArea(R1, ciudad)
  AsignarArea(R2, ciudad)
  AsignarArea(Fiscal, ciudad)
  Iniciar(R1, 2, 2)
  Iniciar(R2, 5, 5)
  Iniciar(Fiscal, 1, 1)
fin