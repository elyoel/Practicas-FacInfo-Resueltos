programa act4
procesos
  proceso agarrarPapel(ES puedo: boolean)
  variables
    IniAv, IniCa: numero
  comenzar
    IniAv:= PosAv
    IniCa:= PosCa
    BloquearEsquina(11, 11)
    Pos(11, 11)
    puedo:= HayPapelEnLaEsquina
    si (puedo)
      tomarPapel
    Pos(IniAv, IniCa)
    LiberarEsquina(11, 11)
  fin    
  proceso verificarMax(ES maxPasos: numero; ES maxId: numero; E pasos: numero; E id: numero)
  comenzar
    si (pasos > maxPasos)
      maxPasos:= pasos
      maxId:= id
  fin
areas
  ciudad: AreaC (1, 1, 100, 100)
robots
  robot Corredor
  variables
    miId, pasos: numero
    hayPapel: boolean
  comenzar
    RecibirMensaje(miId, R5)
    pasos:= 0
    hayPapel:= V
    mientras  hayPapel
      agarrarPapel(hayPapel)
      si (hayPapel)
        depositarPapel
        mover
        pasos:= pasos + 1
    EnviarMensaje(miId, R5)
    EnviarMensaje(pasos, R5)
  fin
  robot Coordinador
  variables
    aux, maxId, maxPasos: numero
  comenzar  
    EnviarMensaje(1, R1)
    EnviarMensaje(2, R2)
    RecibirMensaje(id1, *)
    
  fin
variables
  R1, R2: Corredor
  Fiscal: Fiscalizador
comenzar
  AsignarArea(R1, ciudad)
  AsignarArea(R2, ciudad)
  AsignarArea(Fiscal, ciudad)
  Iniciar(R1, 2, 2)
  Iniciar(R2, 5, 5)
  Iniciar(Fiscal, 1, 1)
fin